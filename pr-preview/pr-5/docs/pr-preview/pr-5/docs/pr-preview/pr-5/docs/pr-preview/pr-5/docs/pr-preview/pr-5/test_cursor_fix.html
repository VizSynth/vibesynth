<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cursor Input Test</title>
</head>
<body>
    <h1>Cursor Input Component Test</h1>
    <p>Open browser console and run: testCursorComponents()</p>
    
    <script src="script.js"></script>
    <script>
        function testCursorComponents() {
            console.log('🧪 Testing Cursor Input Components...');
            
            // Test that cursorComponents exists and has all expected components
            const expectedComponents = ['x', 'y', 'velocity', 'click'];
            
            expectedComponents.forEach(component => {
                if (cursorComponents[component]) {
                    console.log(`✅ Component '${component}' exists:`, cursorComponents[component]);
                } else {
                    console.error(`❌ Component '${component}' missing!`);
                }
            });
            
            // Test creating a cursor input node
            try {
                const cursorNode = createControlInputNode('CursorInput');
                console.log('✅ Successfully created CursorInput node:', cursorNode);
                
                // Test each component
                expectedComponents.forEach(component => {
                    cursorNode.params.component = component;
                    const value = getValue(cursorNode);
                    console.log(`✅ Component '${component}' getValue: ${value}`);
                });
                
                // Test range mapping
                cursorNode.params.component = 'x';
                cursorNode.params.min = 0.2;
                cursorNode.params.max = 0.8;
                
                // Simulate mouse position
                cursorComponents.x.value = 0.5;
                const mappedValue = getValue(cursorNode);
                const expectedValue = 0.2 + (0.5 * (0.8 - 0.2));
                console.log(`✅ Range mapping test: value=${mappedValue}, expected=${expectedValue}`);
                
                // Cleanup
                deleteNode(cursorNode);
                console.log('✅ All cursor input tests passed!');
                
            } catch (error) {
                console.error('❌ Error testing cursor input:', error);
            }
        }
        
        // Run test after page loads
        window.addEventListener('load', () => {
            setTimeout(testCursorComponents, 1000);
        });
    </script>
</body>
</html>